<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<section class="ouvJEz"><h1 class="_1RuRku">访问者模式一篇就够了</h1><div class="rEsl9f"><div class="s-dsoj"><span class="_3tCVn5"><i aria-label="ic-diamond" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-diamond"></use></svg></i><span>5</span></span><time datetime="2019-02-01T07:36:03.000Z">2019.02.01 15:36:03</time><span>字数 1919</span><span>阅读 3081</span></div></div><article class="_2rhmJa"><h2>访问者模式介绍</h2>
    <p>最复杂的设计模式，并且使用频率不高，《设计模式》的作者评价为：大多情况下，你不需要使用访问者模式，但是一旦需要使用它时，那就真的需要使用了。</p>
    <p>访问者模式是一种将数据操作和数据结构分离的设计模式。（觉得太抽象，可以看下面的例子）。</p>
    <h2>访问者模式的使用场景</h2>
    <ol>
        <li>对象结构比较稳定，但经常需要在此对象结构上定义新的操作。</li>
        <li>需要对一个对象结构中的对象进行很多不同的并且不相关的操作，而需要避免这些操作“污染”这些对象的类，也不希望在增加新操作时修改这些类。</li>
    </ol>
    <h2>访问者模式的UML类图</h2>
    <div class="image-package">
        <div class="image-container" style="max-width: 700px; max-height: 455px; background-color: transparent;">
            <div class="image-container-fill" style="padding-bottom: 54.169999999999995%;"></div>
            <div class="image-view" data-width="840" data-height="455"><img data-original-src="//upload-images.jianshu.io/upload_images/7345261-f1b6fe6189c026da.png" data-original-width="840" data-original-height="455" data-original-format="image/png" data-original-filesize="44194" class="" style="cursor: zoom-in;" data-image-index="0" src="//upload-images.jianshu.io/upload_images/7345261-f1b6fe6189c026da.png?imageMogr2/auto-orient/strip|imageView2/2/w/840"></div>
        </div>
        <div class="image-caption">访问者模式</div>
    </div><br>
    <p>角色介绍</p>

    <ul>
        <li>
            <strong>Visitor：</strong>接口或者抽象类，定义了对每个 Element 访问的行为，它的参数就是被访问的元素，它的方法个数理论上与元素的个数是一样的，因此，访问者模式要求元素的类型要稳定，如果经常添加、移除元素类，必然会导致频繁地修改 Visitor 接口，如果出现这种情况，则说明不适合使用访问者模式。</li>
        <li>
            <strong>ConcreteVisitor：</strong>具体的访问者，它需要给出对每一个元素类访问时所产生的具体行为。</li>
        <li>
            <strong>Element：</strong>元素接口或者抽象类，它定义了一个接受访问者（accept）的方法，其意义是指每一个元素都要可以被访问者访问。</li>
        <li>
            <strong>ElementA、ElementB：</strong>具体的元素类，它提供接受访问的具体实现，而这个具体的实现，通常情况下是使用访问者提供的访问该元素类的方法。</li>
        <li>
            <strong>ObjectStructure：</strong>定义当中所提到的对象结构，对象结构是一个抽象表述，它内部管理了元素集合，并且可以迭代这些元素提供访问者访问。</li>
    </ul>
    <p>依然很抽象，看下面的栗子吧。</p>
    <h2>访问者模式的简单示例</h2>
    <p>年底，CEO和CTO开始评定员工一年的工作绩效，员工分为工程师和经理，CTO关注工程师的代码量、经理的新产品数量；CEO关注的是工程师的KPI和经理的KPI以及新产品数量。<br>
        由于CEO和CTO对于不同员工的关注点是不一样的，这就需要对不同员工类型进行不同的处理。访问者模式此时可以派上用场了。</p>
    <pre class="line-numbers  language-java"><code class="java  language-java"><span class="token comment">// 员工基类</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Staff</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> kpi<span class="token punctuation">;</span><span class="token comment">// 员工KPI</span>

    <span class="token keyword">public</span> <span class="token class-name">Staff</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        kpi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 核心方法，接受Visitor的访问</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Visitor</span> visitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
    <p>Staff 类定义了员工基本信息及一个 accept 方法，accept 方法表示接受访问者的访问，由子类具体实现。<strong>Visitor 是个接口，传入不同的实现类，可访问不同的数据</strong>。下面看看工程师和经理的代码：</p>
    <pre class="line-numbers  language-java"><code class="java  language-java"><span class="token comment">// 工程师</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Engineer</span> <span class="token keyword">extends</span> <span class="token class-name">Staff</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Engineer</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Visitor</span> visitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        visitor<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 工程师一年的代码数量</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCodeLines</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
    <pre class="line-numbers  language-java"><code class="java  language-java"><span class="token comment">// 经理</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Staff</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Visitor</span> visitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        visitor<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 一年做的产品数量</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
    <p>工程师是代码数量，经理是产品数量，他们的职责不一样，也就是因为差异性，才使得访问模式能够发挥它的作用。Staff、Engineer、Manager 3个类型就是<strong>对象结构，这些类型相对稳定</strong>，不会发生变化。<br>
        然后将这些员工添加到一个业务报表类中，公司高层可以通过该报表类的 showReport 方法查看所有员工的业绩，具体代码如下：</p>
    <pre class="line-numbers  language-java"><code class="java  language-java"><span class="token comment">// 员工业务报表类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BusinessReport</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Staff</span><span class="token punctuation">&gt;</span></span> mStaffs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BusinessReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mStaffs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token string">"经理-A"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mStaffs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Engineer</span><span class="token punctuation">(</span><span class="token string">"工程师-A"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mStaffs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Engineer</span><span class="token punctuation">(</span><span class="token string">"工程师-B"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mStaffs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Engineer</span><span class="token punctuation">(</span><span class="token string">"工程师-C"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mStaffs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token string">"经理-B"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mStaffs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Engineer</span><span class="token punctuation">(</span><span class="token string">"工程师-D"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 为访问者展示报表
     * @param visitor 公司高层，如CEO、CTO
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showReport</span><span class="token punctuation">(</span><span class="token class-name">Visitor</span> visitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Staff</span> staff <span class="token operator">:</span> mStaffs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            staff<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>visitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
    <p>下面看看 Visitor 类型的定义， Visitor 声明了两个 visit 方法，分别是对工程师和经理对访问函数，具体代码如下：</p>
    <pre class="line-numbers  language-java"><code class="java  language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Visitor</span> <span class="token punctuation">{</span>

    <span class="token comment">// 访问工程师类型</span>
    <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Engineer</span> engineer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 访问经理类型</span>
    <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Manager</span> manager<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
    <p>首先定义了一个 Visitor 接口，该接口有两个 visit 函数，参数分别是 Engineer、Manager，也就是说对于 Engineer、Manager 的访问会调用两个不同的方法，以此达成区别对待、差异化处理。具体实现类为 CEOVisitor、CTOVisitor类，具体代码如下：</p>
    <pre class="line-numbers  language-java"><code class="java  language-java"><span class="token comment">// CEO访问者</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CEOVisitor</span> <span class="token keyword">implements</span> <span class="token class-name">Visitor</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Engineer</span> engineer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"工程师: "</span> <span class="token operator">+</span> engineer<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">", KPI: "</span> <span class="token operator">+</span> engineer<span class="token punctuation">.</span>kpi<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Manager</span> manager<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"经理: "</span> <span class="token operator">+</span> manager<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">", KPI: "</span> <span class="token operator">+</span> manager<span class="token punctuation">.</span>kpi <span class="token operator">+</span>
                <span class="token string">", 新产品数量: "</span> <span class="token operator">+</span> manager<span class="token punctuation">.</span><span class="token function">getProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
    <p>在CEO的访问者中，CEO关注工程师的 KPI，经理的 KPI 和新产品数量，通过两个 visitor 方法分别进行处理。如果不使用 Visitor 模式，只通过一个 visit 方法进行处理，那么就需要在这个 visit 方法中进行判断，然后分别处理，代码大致如下：</p>
    <pre class="line-numbers  language-java"><code class="java  language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReportUtil</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Staff</span> staff<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>staff <span class="token keyword">instanceof</span> <span class="token class-name">Manager</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Manager</span> manager <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Manager</span><span class="token punctuation">)</span> staff<span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"经理: "</span> <span class="token operator">+</span> manager<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">", KPI: "</span> <span class="token operator">+</span> manager<span class="token punctuation">.</span>kpi <span class="token operator">+</span>
                    <span class="token string">", 新产品数量: "</span> <span class="token operator">+</span> manager<span class="token punctuation">.</span><span class="token function">getProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>staff <span class="token keyword">instanceof</span> <span class="token class-name">Engineer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Engineer</span> engineer <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Engineer</span><span class="token punctuation">)</span> staff<span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"工程师: "</span> <span class="token operator">+</span> engineer<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">", KPI: "</span> <span class="token operator">+</span> engineer<span class="token punctuation">.</span>kpi<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
    <p>这就导致了 <strong>if-else 逻辑的嵌套以及类型的强制转换，难以扩展和维护</strong>，当类型较多时，这个 ReportUtil 就会很复杂。而使用 Visitor 模式，通过同一个函数对不同对元素类型进行相应对处理，使结构更加清晰、灵活性更高。<br>
        再添加一个CTO的 Visitor 类：</p>
    <pre class="line-numbers  language-java"><code class="java  language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CTOVisitor</span> <span class="token keyword">implements</span> <span class="token class-name">Visitor</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Engineer</span> engineer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"工程师: "</span> <span class="token operator">+</span> engineer<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">", 代码行数: "</span> <span class="token operator">+</span> engineer<span class="token punctuation">.</span><span class="token function">getCodeLines</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Manager</span> manager<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"经理: "</span> <span class="token operator">+</span> manager<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">", 产品数量: "</span> <span class="token operator">+</span> manager<span class="token punctuation">.</span><span class="token function">getProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
    <p><strong>重载的 visit 方法会对元素进行不同的操作，而通过注入不同的 Visitor 又可以替换掉访问者的具体实现</strong>，使得对元素的操作变得更灵活，可扩展性更高，同时也消除了类型转换、if-else 等“丑陋”的代码。<br>
        下面是客户端代码：</p>
    <pre class="line-numbers  language-java"><code class="java  language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 构建报表</span>
        <span class="token class-name">BusinessReport</span> report <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BusinessReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=========== CEO看报表 ==========="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        report<span class="token punctuation">.</span><span class="token function">showReport</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CEOVisitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=========== CTO看报表 ==========="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        report<span class="token punctuation">.</span><span class="token function">showReport</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CTOVisitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
    <p>具体输出如下：</p>
    <pre class="line-numbers  language-objectivec"><code class="  language-objectivec"><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span> CEO看报表 <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
经理<span class="token punctuation">:</span> 经理<span class="token operator">-</span>A<span class="token punctuation">,</span> KPI<span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">,</span> 新产品数量<span class="token punctuation">:</span> <span class="token number">0</span>
工程师<span class="token punctuation">:</span> 工程师<span class="token operator">-</span>A<span class="token punctuation">,</span> KPI<span class="token punctuation">:</span> <span class="token number">6</span>
工程师<span class="token punctuation">:</span> 工程师<span class="token operator">-</span>B<span class="token punctuation">,</span> KPI<span class="token punctuation">:</span> <span class="token number">6</span>
工程师<span class="token punctuation">:</span> 工程师<span class="token operator">-</span>C<span class="token punctuation">,</span> KPI<span class="token punctuation">:</span> <span class="token number">8</span>
经理<span class="token punctuation">:</span> 经理<span class="token operator">-</span>B<span class="token punctuation">,</span> KPI<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> 新产品数量<span class="token punctuation">:</span> <span class="token number">6</span>
工程师<span class="token punctuation">:</span> 工程师<span class="token operator">-</span>D<span class="token punctuation">,</span> KPI<span class="token punctuation">:</span> <span class="token number">6</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span> CTO看报表 <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
经理<span class="token punctuation">:</span> 经理<span class="token operator">-</span>A<span class="token punctuation">,</span> 产品数量<span class="token punctuation">:</span> <span class="token number">3</span>
工程师<span class="token punctuation">:</span> 工程师<span class="token operator">-</span>A<span class="token punctuation">,</span> 代码行数<span class="token punctuation">:</span> <span class="token number">62558</span>
工程师<span class="token punctuation">:</span> 工程师<span class="token operator">-</span>B<span class="token punctuation">,</span> 代码行数<span class="token punctuation">:</span> <span class="token number">92965</span>
工程师<span class="token punctuation">:</span> 工程师<span class="token operator">-</span>C<span class="token punctuation">,</span> 代码行数<span class="token punctuation">:</span> <span class="token number">58839</span>
经理<span class="token punctuation">:</span> 经理<span class="token operator">-</span>B<span class="token punctuation">,</span> 产品数量<span class="token punctuation">:</span> <span class="token number">6</span>
工程师<span class="token punctuation">:</span> 工程师<span class="token operator">-</span>D<span class="token punctuation">,</span> 代码行数<span class="token punctuation">:</span> <span class="token number">53125</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
    <p>在上述示例中，Staff 扮演了 Element 角色，而 Engineer 和 Manager 都是 ConcreteElement；CEOVisitor 和 CTOVisitor 都是具体的 Visitor 对象；而 BusinessReport 就是 ObjectStructure；Client就是客户端代码。<br>
        访问者模式最大的优点就是增加访问者非常容易，我们从代码中可以看到，如果要增加一个访问者，只要新实现一个 Visitor 接口的类，从而达到数据对象与数据操作相分离的效果。如果不实用访问者模式，而又不想对不同的元素进行不同的操作，那么必定需要使用 if-else 和类型转换，这使得代码难以升级维护。</p>
    <h2>总结</h2>
    <p>我们要根据具体情况来评估是否适合使用访问者模式，例如，我们的对象结构是否足够稳定，是否需要经常定义新的操作，使用访问者模式是否能优化我们的代码，而不是使我们的代码变得更复杂。</p>
    <ul>
        <li>
            <p>访问者模式的优点。</p>
            <ol>
                <li>
                    <strong>各角色职责分离，符合单一职责原则</strong><br>
                    通过UML类图和上面的示例可以看出来，Visitor、ConcreteVisitor、Element 、ObjectStructure，职责单一，各司其责。</li>
                <li>
                    <strong>具有优秀的扩展性</strong><br>
                    如果需要增加新的访问者，增加实现类 ConcreteVisitor 就可以快速扩展。</li>
                <li>
                    <strong>使得数据结构和作用于结构上的操作解耦，使得操作集合可以独立变化</strong><br>
                    员工属性（数据结构）和CEO、CTO访问者（数据操作）的解耦。</li>
                <li><strong>灵活性</strong></li>
            </ol>
        </li>
        <li>
            <p>访问者模式的缺点。</p>
            <ol>
                <li>
                    <strong>具体元素对访问者公布细节，违反了迪米特原则</strong><br>
                    CEO、CTO需要调用具体员工的方法。</li>
                <li>
                    <strong>具体元素变更时导致修改成本大</strong><br>
                    变更员工属性时，多个访问者都要修改。</li>
                <li>
                    <strong>违反了依赖倒置原则，为了达到“区别对待”而依赖了具体类，没有以来抽象</strong><br>
                    访问者 visit 方法中，依赖了具体员工的具体方法。</li>
            </ol>
        </li>
    </ul>
    <h2>参考</h2>
    <p><a href="https://baike.baidu.com/item/Android%E6%BA%90%E7%A0%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98/20132021?fr=aladdin" target="_blank" rel="nofollow">《Android源码设计模式解析与实战》</a></p>
</article><div></div><div class="_1kCBjS"><div class="_18vaTa"><div class="_3BUZPB"><div class="_2Bo4Th" role="button" tabindex="-1" aria-label="给文章点赞"><i aria-label="ic-like" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-like"></use></svg></i></div><span class="_1LOh_5" role="button" tabindex="-1" aria-label="查看点赞列表">14人点赞<i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></span></div><div class="_3BUZPB"><div class="_2Bo4Th" role="button" tabindex="-1"><i aria-label="ic-dislike" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-dislike"></use></svg></i></div></div></div><div class="_18vaTa"><a class="_3BUZPB _1x1ok9 _1OhGeD" href="/nb/33649853" target="_blank" rel="noopener noreferrer"><i aria-label="ic-notebook" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-notebook"></use></svg></i><span>设计模式</span></a><div class="_3BUZPB ant-dropdown-trigger"><div class="_2Bo4Th"><i aria-label="ic-others" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-others"></use></svg></i></div></div></div></div><div class="_19DgIp" style="margin-top:24px;margin-bottom:24px"></div><div class="_3W59v5"><div class="Uz-vZq"><div class="VwEQ52"><a class="_1OhGeD" href="/u/0870d4cd364f" target="_blank" rel="noopener noreferrer"><img class="_3nYIo3" src="//upload.jianshu.io/users/upload_avatars/7345261/5876177d-9faf-4142-add1-86cccb710dc7.jpg?imageMogr2/auto-orient/strip|imageView2/1/w/120/h/120" alt="  "></a><div class="_2lfNuF"><div class="Cqpr1X" title="JamFF"><a class="_1OhGeD" href="/u/0870d4cd364f" target="_blank" rel="noopener noreferrer">JamFF</a></div><div class="_2qBui4"><span>拥有74钻 (约7.92元)</span></div></div><button data-locale="zh-CN" type="button" class="_1OyPqC _3Mi9q9"><span>关注</span></button></div><div class="VwEQ52 _13lIbp"><div class="_2lfNuF"><div class="Cqpr1X">"小礼物走一走，来简书关注我"</div></div><button type="button" class="_1OyPqC _3Mi9q9"><span>赞赏</span></button></div></div></div></section><div id="note-page-comment"><section class="ouvJEz"><div class="_26JdYM"><img class="_3LHFA-" src="" alt=""><div class="_3GKFE3"><textarea class="_1u_H4i" placeholder="写下你的评论..."></textarea><div></div></div></div><div class="_2lR7N6" style="display: none;"><div class="_17_lFi"><div class="_3k5vgx"></div><div><div class="U36Th9"></div><div class="_9aTHBB"></div></div></div><div class="_1Lq8tt"></div><div class="_1Lq8tt _1muh0x"></div><div class="_3Pu4Wf"><i aria-label="ic-like" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-like"></use></svg></i><div class="_1mcOnW"></div><i aria-label="ic-reply" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-reply"></use></svg></i><div class="_1mcOnW"></div></div></div><h3 class="QxT4hD"><div class="_10KzV0"><span>全部评论</span><span class="_2R7vBo">3</span><span class="_1DVmvZ" role="checkbox" tabindex="0" aria-label="只看作者" aria-checked="false">只看作者</span></div><div class="_2zSaYx"><div class="_1ekjko _1BIpxf" role="button" tabindex="-1">按时间倒序</div><div class="_1ekjko" role="button" tabindex="-1">按时间正序</div></div></h3><div class="_2lR7N6" style="display: none;"><div class="_17_lFi"><div class="_3k5vgx"></div><div><div class="U36Th9"></div><div class="_9aTHBB"></div></div></div><div class="_1Lq8tt"></div><div class="_1Lq8tt _1muh0x"></div><div class="_3Pu4Wf"><i aria-label="ic-like" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-like"></use></svg></i><div class="_1mcOnW"></div><i aria-label="ic-reply" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-reply"></use></svg></i><div class="_1mcOnW"></div></div></div><div class="_2gPNSa"><div class="_2IUqvs" id="comment-48606389"><a class="_1OhGeD" href="/u/6fd434c0a828" target="_blank" rel="noopener noreferrer"><img class="_1_jhXc" src="//upload.jianshu.io/users/upload_avatars/19237357/831a365e-30d4-4ad4-8bc8-f82fe9a78ffd?imageMogr2/auto-orient/strip|imageView2/1/w/80/h/80" alt=""></a><div class="_1K9gkf"><div class="_23G05g"><a class="_1OhGeD" href="/u/6fd434c0a828" target="_blank" rel="noopener noreferrer">名字这种东西</a></div><div class="_1xqkrI"><span>4楼 </span><time datetime="2019-10-17T12:22:14.000Z">10.17 20:22</time></div><div class="_2bDGm4">确实看懂了</div><div class="_2ti5br"><div class="_3MyyYc"><span class="_2GXD2V _1Jvkh4" role="button" tabindex="-1" aria-label="点赞"><i aria-label="ic-like" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-like"></use></svg></i> 赞</span><span class="_1Jvkh4" role="button" tabindex="-1" aria-label="添加评论"><i aria-label="ic-reply" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-reply"></use></svg></i> 回复</span></div><div class="_1vPqGj"></div></div><div></div></div></div><div class="_2IUqvs" id="comment-46369187"><a class="_1OhGeD" href="/u/226306bdd2b0" target="_blank" rel="noopener noreferrer"><img class="_1_jhXc" src="//upload.jianshu.io/users/upload_avatars/19471640/c0bad521-194b-4391-81a4-b467aefec58e?imageMogr2/auto-orient/strip|imageView2/1/w/80/h/80" alt=""></a><div class="_1K9gkf"><div class="_23G05g"><a class="_1OhGeD" href="/u/226306bdd2b0" target="_blank" rel="noopener noreferrer">蛟_c7b6</a></div><div class="_1xqkrI"><span>3楼 </span><time datetime="2019-09-02T09:44:46.000Z">09.02 17:44</time></div><div class="_2bDGm4">👍</div><div class="_2ti5br"><div class="_3MyyYc"><span class="_2GXD2V _1Jvkh4" role="button" tabindex="-1" aria-label="点赞"><i aria-label="ic-like" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-like"></use></svg></i> 赞</span><span class="_1Jvkh4" role="button" tabindex="-1" aria-label="添加评论"><i aria-label="ic-reply" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-reply"></use></svg></i> 回复</span></div><div class="_1vPqGj"></div></div><div></div></div></div><div class="_2IUqvs" id="comment-35451930"><a class="_1OhGeD" href="/u/4eae4eb2db88" target="_blank" rel="noopener noreferrer"><img class="_1_jhXc" src="//upload.jianshu.io/users/upload_avatars/5258053/f266dd2a-554b-4dec-8a6a-e5ed4100b338.png?imageMogr2/auto-orient/strip|imageView2/1/w/80/h/80" alt=""></a><div class="_1K9gkf"><div class="_23G05g"><a class="_1OhGeD" href="/u/4eae4eb2db88" target="_blank" rel="noopener noreferrer">_陈祥</a></div><div class="_1xqkrI"><span>2楼 </span><time datetime="2019-02-13T02:13:48.000Z">02.13 10:13</time></div><div class="_2bDGm4">为内容生产者点赞！！！</div><div class="_2ti5br"><div class="_3MyyYc"><span class="_2GXD2V _1Jvkh4" role="button" tabindex="-1" aria-label="点赞"><i aria-label="ic-like" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-like"></use></svg></i> 赞</span><span class="_1Jvkh4" role="button" tabindex="-1" aria-label="添加评论"><i aria-label="ic-reply" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-reply"></use></svg></i> 回复</span></div><div class="_1vPqGj"></div></div><div></div></div></div></div></section></div><section class="ouvJEz"><h3 class="QxT4hD"><span>被以下专题收入，发现更多相似内容</span></h3><div class="_2Nttfz"><a class="_3s5t0Q _1OhGeD" href="/c/d1591c322c89" target="_blank" rel="noopener noreferrer"><img class="_2vEwGY" src="//upload.jianshu.io/collections/images/14739/android.graphics.Bitmap_15f127c2.jpeg?imageMogr2/auto-orient/strip|imageView2/1/w/48/h/48" alt=""><span class="_2-Djqu">Android开发</span></a><a class="_3s5t0Q _1OhGeD" href="/c/5139d555c94d" target="_blank" rel="noopener noreferrer"><img class="_2vEwGY" src="//upload.jianshu.io/collections/images/3183/1416528891_3612.png?imageMogr2/auto-orient/strip|imageView2/1/w/48/h/48" alt=""><span class="_2-Djqu">Android...</span></a><a class="_3s5t0Q _1OhGeD" href="/c/NEt52a" target="_blank" rel="noopener noreferrer"><img class="_2vEwGY" src="//upload.jianshu.io/collections/images/16/computer_guy.jpg?imageMogr2/auto-orient/strip|imageView2/1/w/48/h/48" alt=""><span class="_2-Djqu">程序员</span></a><a class="_3s5t0Q _1OhGeD" href="/c/5c595f4a7ded" target="_blank" rel="noopener noreferrer"><img class="_2vEwGY" src="//upload.jianshu.io/collections/images/345607/%E6%9C%AA%E5%91%BD%E5%90%8D.jpg?imageMogr2/auto-orient/strip|imageView2/1/w/48/h/48" alt=""><span class="_2-Djqu">java架构师</span></a><a class="_3s5t0Q _1OhGeD" href="/c/703bbe5341fd" target="_blank" rel="noopener noreferrer"><img class="_2vEwGY" src="//upload.jianshu.io/collections/images/1753957/QQ%E6%B5%8F%E8%A7%88%E5%99%A8%E6%88%AA%E5%9B%BE20190423133544.png?imageMogr2/auto-orient/strip|imageView2/1/w/48/h/48" alt=""><span class="_2-Djqu">DDD</span></a></div><div class="_19DgIp" style="margin-top: 32px; margin-bottom: 32px;"></div><h3 class="QxT4hD"><span>推荐阅读</span><a class="_29KFEa _1OhGeD" href="/" target="_blank" rel="noopener noreferrer">更多精彩内容<i aria-label="ic-right" class="anticon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><use xlink:href="#ic-right"></use></svg></i></a></h3><ul class="_1iTR78"><li class="_11jppn"><div class="JB6qEE"><div class="em6wEs" title="行为型SEQ11 - 访问者模式 Visitor Pattern" role="heading" aria-level="4"><a class="_2voXH8 _1OhGeD" href="/p/5a40887d1c9b" target="_blank" rel="noopener noreferrer">行为型SEQ11 - 访问者模式 Visitor Pattern</a></div><div class="_3fvgn4">【学习难度：★★☆☆☆，使用频率：★★★☆☆】直接出处：访问者模式梳理和学习：https://github.com...</div><div class="_1pJt6F"><a class="_3IWz1q _1OhGeD" href="/u/8bc5f4428ca2" target="_blank" rel="noopener noreferrer"><img class="_34VC_H" src="//upload.jianshu.io/users/upload_avatars/5792176/6c03f8d9-19e7-4e35-aa71-1060302ed5cb?imageMogr2/auto-orient/strip|imageView2/1/w/48/h/48" alt=""><span class="_3tPsL6">BruceOuyang</span></a></div></div></li><li class="_11jppn"><div class="JB6qEE"><div class="em6wEs" title="【行为型模式十九】访问者模式（Visitor）" role="heading" aria-level="4"><a class="_2voXH8 _1OhGeD" href="/p/62289b9bcfcb" target="_blank" rel="noopener noreferrer">【行为型模式十九】访问者模式（Visitor）</a></div><div class="_3fvgn4">1 场景问题# 1.1 扩展客户管理的功能## 考虑这样一个应用：扩展客户管理的功能。 既然是扩展功能，那么肯定是...</div><div class="_1pJt6F"><a class="_3IWz1q _1OhGeD" href="/u/657c611b2e07" target="_blank" rel="noopener noreferrer"><img class="_34VC_H" src="//upload.jianshu.io/users/upload_avatars/2062729/105612dd-1e85-48e5-b3fa-a13cf07fddb6.jpg?imageMogr2/auto-orient/strip|imageView2/1/w/48/h/48" alt=""><span class="_3tPsL6">猿码道</span></a></div></div></li><li class="_11jppn"><div class="JB6qEE"><div class="em6wEs" title="设计模式--访问者模式" role="heading" aria-level="4"><a class="_2voXH8 _1OhGeD" href="/p/4c155710a8d2" target="_blank" rel="noopener noreferrer">设计模式--访问者模式</a></div><div class="_3fvgn4">目录 本文的结构如下： 引言 什么是访问者模式 模式的结构 典型代码 访问者模式中的伪动态双分派 代码示例 访问者...</div><div class="_1pJt6F"><a class="_3IWz1q _1OhGeD" href="/u/44304509b1eb" target="_blank" rel="noopener noreferrer"><img class="_34VC_H" src="http://cdn2.jianshu.io/assets/default_avatar/9-cceda3cf5072bcdd77e8ca4f21c40998.jpg" alt=""><span class="_3tPsL6">w1992wishes</span></a></div></div></li><li class="_11jppn"><div class="JB6qEE"><div class="em6wEs" title="【设计模式笔记】（十四）- 访问者模式" role="heading" aria-level="4"><a class="_2voXH8 _1OhGeD" href="/p/a2fdb3387301" target="_blank" rel="noopener noreferrer">【设计模式笔记】（十四）- 访问者模式</a></div><div class="_3fvgn4">一、简述 访问者模式是一种将数据操作和数据结构分离的设计模式，是23种设计模式中非常复杂的一种，而且使用频率并不高...</div><div class="_1pJt6F"><a class="_3IWz1q _1OhGeD" href="/u/70bd9fefe61f" target="_blank" rel="noopener noreferrer"><img class="_34VC_H" src="//upload.jianshu.io/users/upload_avatars/595349/fa204eae-e95e-41a8-bbcc-4cd47e492eab.jpg?imageMogr2/auto-orient/strip|imageView2/1/w/48/h/48" alt=""><span class="_3tPsL6">MrTrying</span></a></div></div></li><li class="_11jppn"><div class="JB6qEE"><div class="em6wEs" title="5.11 VISITOR（访问者） — 对象行为型模式" role="heading" aria-level="4"><a class="_2voXH8 _1OhGeD" href="/p/fe536feb1d01" target="_blank" rel="noopener noreferrer">5.11 VISITOR（访问者） — 对象行为型模式</a></div><div class="_3fvgn4">1 意图 表示一个作用于某对象结构中的各元素操作。它使你可以在不改变各元素的类的前提下定义作用于这些元素的新操作。...</div><div class="_1pJt6F"><a class="_3IWz1q _1OhGeD" href="/u/4ff189e8d8ac" target="_blank" rel="noopener noreferrer"><img class="_34VC_H" src="http://cdn2.jianshu.io/assets/default_avatar/9-cceda3cf5072bcdd77e8ca4f21c40998.jpg" alt=""><span class="_3tPsL6">10xjzheng</span></a></div></div></li></ul></section>
</body>
</html>